(this["webpackJsonppenpost-mobile"]=this["webpackJsonppenpost-mobile"]||[]).push([[0],{103:function(e,t,c){},104:function(e,t,c){},105:function(e,t,c){"use strict";c.r(t),c.d(t,"client",(function(){return D}));var s,n,a,r=c(3),i=c(65),l=c.n(i),j=(c(90),c(1)),o=function(){return Object(j.jsx)("section",{className:"errorSection",children:Object(j.jsxs)("article",{className:"errorMessage",children:[Object(j.jsx)("h2",{children:"We are having technical difficulties."}),Object(j.jsx)("p",{children:Object(j.jsx)("em",{children:"Please try again or revisit at a later time."})})]})})},b=c(10),d=c(12),u=c(11),O=c(72),h=(c(92),function(e){var t=e.isLoggedIn,c=e.setIsLoggedIn,s=Object(r.useState)(!1),n=Object(b.a)(s,2),a=n[0],i=n[1],l=function(){i(!1)},o=function(){localStorage.clear(),D.resetStore()};return Object(j.jsxs)("header",{children:[Object(j.jsx)(O.a,{toggled:a,toggle:i}),a&&!t&&Object(j.jsx)("div",{className:"menuOptions",children:Object(j.jsxs)("ul",{className:"menu",onClick:l,children:[Object(j.jsx)("li",{children:Object(j.jsx)(u.b,{to:"/",children:"Home"})}),Object(j.jsx)("li",{children:Object(j.jsx)(u.b,{to:"/login",children:"Login"})})]})}),a&&t&&Object(j.jsx)("div",{className:"menuOptions",children:Object(j.jsxs)("ul",{className:"menu",onClick:l,children:[Object(j.jsx)("li",{children:Object(j.jsx)(u.b,{to:"/",children:"Home"})}),Object(j.jsx)("li",{children:Object(j.jsx)(u.b,{to:"/user-landing",children:"My Info"})}),Object(j.jsx)("li",{children:Object(j.jsx)(u.b,{to:"/create-postcard",children:"Create"})}),Object(j.jsx)("li",{onClick:function(){c(!1),o()},children:Object(j.jsx)(u.b,{to:"/login",children:"Logout"})})]})}),Object(j.jsx)("h1",{className:"headerTitle",children:"PenPost"})]})}),m=(c(97),function(e){var t=e.isLoggedIn;return Object(j.jsxs)("section",{className:"homepage",children:[Object(j.jsx)("h1",{className:"homepageTitle",children:"Welcome to"}),Object(j.jsx)("div",{className:"penPostImage",children:Object(j.jsx)("h1",{className:"penPostText",children:"PenPost"})}),Object(j.jsx)("p",{className:"paragraphText",children:"Take a picture and send it as postcard from your phone to your PenPost."}),!t&&Object(j.jsx)("div",{className:"buttonContainer",children:Object(j.jsx)(u.b,{to:"/login",children:Object(j.jsx)("button",{className:"loginButton button","aria-label":"login",children:"Login"})})})]})}),x=c(15),p=c(32),g=Object(x.gql)(s||(s=Object(p.a)(["\n  mutation ($email: String!, $password: String!) {\n    signinUser(input: {\n      credentials: {\n        email: $email, \n        password: $password\n      } \n    }){\n        token\n          user {\n            id\n          }\n       }\n  }\n"]))),v=function(e){var t=e.setIsLoggedIn,c=e.setID,s=Object(r.useState)(!0),n=Object(b.a)(s,2),a=n[0],i=n[1],l=Object(r.useState)(""),o=Object(b.a)(l,2),d=o[0],O=o[1],h=Object(r.useState)(""),m=Object(b.a)(h,2),p=m[0],v=m[1],y=Object(x.useMutation)(g,{onCompleted:function(e){c(parseInt(e.signinUser.user.id)),localStorage.setItem("userData",JSON.stringify(e.signinUser.user.id))}}),f=Object(b.a)(y,1)[0];return Object(j.jsxs)("section",{className:"loginSection",children:[Object(j.jsx)("h1",{className:"loginTitle",children:"Login"}),Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"email",children:"email address:"}),Object(j.jsx)("input",{type:"text",id:"email",name:"email",value:d,minLength:"6",maxLength:"30",autoComplete:"on",required:!0,onChange:function(e){return O(e.target.value)}})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"password",children:"password:"}),Object(j.jsx)("input",{type:"password",id:"password",name:"password",value:p,minLength:"6",maxLength:"20",autoComplete:"off",required:!0,onChange:function(e){return v(e.target.value)}})]}),Object(j.jsx)(u.b,{to:"/user-landing",className:"landingPage",children:Object(j.jsx)("button",{className:"loggedInButton",type:"submit",name:"button","aria-label":"login",onClick:function(e){d.length<6||p.length<6?(e.preventDefault(),O(""),v(""),i(!1)):(t(!0),f({variables:{email:d,password:p}}))},children:"Login"})})]}),!a&&Object(j.jsx)("article",{className:"invalidLoginText",children:Object(j.jsx)("p",{children:"Oops, please check either your username or password! Something seems wrong."})})]})},y=Object(x.gql)(n||(n=Object(p.a)(["\n  query ($id: ID!) {\n    user(id: $id) {\n      name\n      email\n      description\n      street\n      city\n      state\n      zip\n      country\n      addressVerified\n      activePal\n      {\n        name\n        description\n        country\n      }\n    }\n  }\n"]))),f=c(13),N=Object(x.gql)(a||(a=Object(p.a)(["\n  mutation ($id: ID!, $description: String!, $street: String!, $city: String!, $country: String!, $state: String!, $zip: String!) {\n    updateUser(input: {\n      id: $id\n      description: $description\n      country: $country\n      state: $state\n      city: $city\n      street: $street\n      zip: $zip\n    }) {\n      description\n      country\n      state\n      city\n      street\n      zip\n    }\n  }\n"]))),k=c(49),w=function(e){var t=e.queryData,c=e.back,s=e.userID,n=Object(r.useState)(t.description),a=Object(b.a)(n,2),i=a[0],l=a[1],o=Object(r.useState)({street:t.street,city:t.city,state:t.state,zip:t.zip,country:t.country}),d=Object(b.a)(o,2),u=d[0],O=d[1],h=Object(x.useMutation)(N),m=Object(b.a)(h,1)[0],p=function(e){switch(e.target.id){case"street":O(Object(f.a)(Object(f.a)({},u),{},{street:e.target.value}));break;case"city":O(Object(f.a)(Object(f.a)({},u),{},{city:e.target.value}));break;case"state":O(Object(f.a)(Object(f.a)({},u),{},{state:e.target.value}));break;case"zip":O(Object(f.a)(Object(f.a)({},u),{},{zip:e.target.value}));break;case"country":O(Object(f.a)(Object(f.a)({},u),{},{country:e.target.value}));break;case"about":l(e.target.value);break;default:return u}};return Object(j.jsxs)("article",{className:"form-wrapper",children:[Object(j.jsxs)("form",{onChange:p,onSubmit:function(e){e.preventDefault(),c(),m({variables:{id:s,description:i,street:u.street,country:u.country,state:u.state,city:u.city,zip:u.zip},refetchQueries:[{query:y,variables:{id:s}}]})},children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"country",children:"Country:"}),Object(j.jsx)(k.a,{value:u.country,id:"country",className:"country"}),Object(j.jsx)("label",{htmlFor:"state",children:"State/Region:"}),Object(j.jsx)(k.b,{country:u.country,value:u.state,id:"state",className:"state"}),Object(j.jsx)("label",{htmlFor:"street",children:"Street:"}),Object(j.jsx)("input",{type:"text",value:u.street,id:"street",onChange:p}),Object(j.jsx)("label",{htmlFor:"city",children:"City:"}),Object(j.jsx)("input",{type:"text",value:u.city,id:"city",onChange:p}),Object(j.jsx)("label",{htmlFor:"zip",children:"Zip/Postal:"}),Object(j.jsx)("input",{type:"number",value:u.zip,id:"zip",onChange:p})]}),Object(j.jsx)("label",{htmlFor:"about",children:"About:"}),Object(j.jsx)("textarea",{type:"text",value:i,id:"about",className:"about",maxLength:"250",onChange:p}),Object(j.jsx)("label",{htmlFor:"submit"}),Object(j.jsx)("input",{type:"submit",value:"Update",id:"submit",className:"submit"})]}),Object(j.jsx)("label",{htmlFor:"back",value:"back"}),Object(j.jsx)("button",{onClick:c,id:"back",className:"back",children:"Back"})]})},S=function(e){var t=e.id,c=Object(r.useState)(!1),s=Object(b.a)(c,2),n=s[0],a=s[1],i=Object(x.useQuery)(y,{variables:{id:t},onError:Object(j.jsx)(d.a,{to:"/Error"})}).loading,l=D.readQuery({query:y,variables:{id:t}});return i?Object(j.jsx)("p",{children:"Loading..."}):Object(j.jsxs)("div",{className:"landing-wrapper",children:[!n&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("h1",{className:"landing-title",children:["Welcome ",l.user.name]}),Object(j.jsxs)("div",{className:"info-wrapper",children:[Object(j.jsx)("h2",{children:"Profile Info"}),Object(j.jsxs)("div",{className:"address",children:[Object(j.jsxs)("h4",{children:[l.user.street," "]}),Object(j.jsxs)("h4",{children:[l.user.city," ",l.user.state,","," ",l.user.zip]}),Object(j.jsx)("h4",{children:l.user.country})]}),l.user.description&&Object(j.jsx)("h4",{className:"about",children:l.user.description}),!l.user.description&&Object(j.jsx)("h4",{className:"about",children:"Uh oh, looks like you are missing an about me! Click Edit below to add one!"}),Object(j.jsx)("div",{className:"button-wrapper",children:Object(j.jsx)("button",{onClick:function(){return a(!0)},children:"Edit"})})]}),Object(j.jsxs)("div",{className:"info-wrapper",children:[Object(j.jsx)("h2",{children:"Connection"}),Object(j.jsxs)("h4",{className:"connection-name",children:["You are connected with ",l.user.activePal.name," (",l.user.activePal.country,")"]}),Object(j.jsx)("h4",{className:"about",children:l.user.activePal.about}),Object(j.jsx)("div",{className:"button-wrapper",children:Object(j.jsx)(u.b,{to:"/create-postcard",children:Object(j.jsx)("button",{children:"Send Postcard"})})})]})]}),n&&Object(j.jsx)(w,{userID:t,queryData:l.user,back:function(){return a(!1)}})]})},I=c.p+"static/media/postage-stamp.7d006688.png",C=function(){var e=Object(d.f)(),t=Object(r.useState)(""),c=Object(b.a)(t,2),s=c[0],n=c[1],a=Object(r.useState)(""),i=Object(b.a)(a,2),l=i[0],o=i[1];Object(r.useEffect)((function(t,c){null===t||null===c?(n(""),o("")):void 0!==e.state&&(n(e.state.image),o(e.state.message))}),[]);var O=function(e){switch(e.target.id){case"message":o(e.target.value);break;case"image":n(e.target.value);break;default:return}};return Object(j.jsxs)("section",{className:"postcard-form",children:[Object(j.jsx)("h2",{children:"Create your postcard here!"}),Object(j.jsxs)("form",{onChange:O,noValidate:!0,children:[Object(j.jsx)("h3",{children:"Select and Upload an Image"}),Object(j.jsx)("p",{children:"(Please use a link)"}),Object(j.jsxs)("article",{children:[Object(j.jsx)("label",{htmlFor:"image",value:"image upload"}),Object(j.jsx)("input",{type:"text",value:s,id:"image",className:"image",onChange:O,required:!0}),Object(j.jsx)("label",{htmlFor:"clear-image",value:"clear image"}),Object(j.jsx)("button",{type:"button",id:"clear-image",onClick:function(){return n("")},children:"X"})]}),Object(j.jsxs)("article",{className:"image-thumbnail",children:[!s&&Object(j.jsx)("img",{src:I,alt:"an image placeholder"}),s&&Object(j.jsx)("img",{src:s,alt:"your image thumbnail"})]}),Object(j.jsx)("h3",{children:"Enter your message below"}),Object(j.jsx)("p",{children:"(400 character limit)"}),Object(j.jsx)("label",{htmlFor:"message",value:"message"}),Object(j.jsx)("textarea",{type:"text",maxLength:"400",value:l,id:"message",onChange:O,required:!0}),Object(j.jsx)("label",{htmlFor:"preview",value:"preview postcard"}),Object(j.jsx)(u.b,{to:{pathname:"/preview-postcard",state:{image:s,message:l}},children:Object(j.jsx)("input",{type:"submit",value:"Preview",id:"preview",className:"preview "})})]})]})},P=function(){return Object(j.jsxs)("section",{className:"successMessage",children:[Object(j.jsx)("h1",{children:"Thank you!"}),Object(j.jsx)("p",{children:"We've recieved your postcard & it will be sent to your PenPost in 1 - 3 days."}),Object(j.jsx)(u.b,{to:"/user-landing",children:Object(j.jsx)("button",{children:"Ok!"})})]})},L=function(){var e=Object(d.f)().state,t=e.image,c=e.message,s=Object(r.useState)(!1),n=Object(b.a)(s,2),a=n[0],i=n[1],l={backgroundImage:"url("+t+")",alt:"your uploaded image"};return Object(j.jsxs)(j.Fragment,{children:[!a&&Object(j.jsxs)("section",{className:"preview",children:[Object(j.jsx)("article",{className:"front",children:Object(j.jsx)("div",{className:"image",style:l,alt:"your uploaded image",children:Object(j.jsx)("div",{className:"text",children:"Pen Post"})})}),Object(j.jsxs)("article",{className:"back",children:[Object(j.jsx)("div",{className:"message",children:c}),Object(j.jsx)("div",{className:"separation"}),Object(j.jsxs)("div",{className:"address",children:[Object(j.jsx)("hr",{}),Object(j.jsx)("hr",{}),Object(j.jsx)("hr",{}),Object(j.jsx)("hr",{})]}),Object(j.jsx)("div",{className:"stamp"})]}),Object(j.jsxs)("div",{className:"button-wrapper",children:[Object(j.jsx)(u.b,{to:{pathname:"/create-postcard",state:{image:t,message:c}},children:Object(j.jsx)("button",{children:"Edit"})}),Object(j.jsx)("button",{onClick:function(){i(!0)},children:"Send!"})]})]}),a&&Object(j.jsx)(P,{})]})},$=(c(103),function(){var e=Object(r.useState)(null),t=Object(b.a)(e,2),c=t[0],s=t[1],n=Object(r.useState)(null),a=Object(b.a)(n,2),i=a[0],l=a[1];return Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));null!==e?(s(!0),l(parseInt(e))):s(!1)}),[]),Object(j.jsxs)("main",{children:[Object(j.jsx)(h,{isLoggedIn:c,setIsLoggedIn:s}),Object(j.jsx)(d.b,{exact:!0,path:"/",render:function(){return Object(j.jsx)(m,{isLoggedIn:c})}}),Object(j.jsx)(d.b,{exact:!0,path:"/login",render:function(){return Object(j.jsx)(v,{setIsLoggedIn:s,setID:l})}}),Object(j.jsx)(d.b,{exact:!0,path:"/user-landing",render:function(){return Object(j.jsx)(S,{isLoggedIn:c,id:i})}}),Object(j.jsx)(d.b,{exact:!0,path:"/create-postcard",render:function(){return Object(j.jsx)(C,{})}}),Object(j.jsx)(d.b,{exact:!0,path:"/preview-postcard",render:function(){return Object(j.jsx)(L,{})}}),Object(j.jsx)(d.b,{exact:!0,path:"/error",render:function(){return Object(j.jsx)(o,{})}})]})}),F=(c(104),c(71)),z=Object(F.a)((function(e){if(e.graphqlErrors)return Object(j.jsx)(o,{})})),q=Object(x.from)([z,new x.HttpLink({uri:"https://penpost-api.herokuapp.com/graphql"})]),D=new x.ApolloClient({cache:new x.InMemoryCache,link:q,fetchOptions:{mode:"no-cors"},connectToDevTools:!0}),E=Object(j.jsx)(u.a,{children:Object(j.jsx)($,{})});l.a.render(Object(j.jsx)(x.ApolloProvider,{client:D,children:E}),document.getElementById("root"))},90:function(e,t,c){},92:function(e,t,c){},97:function(e,t,c){}},[[105,1,2]]]);
//# sourceMappingURL=main.ae68f405.chunk.js.map